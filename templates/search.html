{% extends "base.html" %}

{% block title %}–ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤ - –†–µ—Ü–µ–ø—Ç—ã –ü–æ–ª–∏–Ω—ã{% endblock %}

{% block content %}
<div class="search-page">
    <div class="search-header">
        <h2><i class="fas fa-search"></i> –ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤</h2>
        <p>–ù–∞–π–¥–∏—Ç–µ –∏–¥–µ–∞–ª—å–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç –ø–æ –≤–∞—à–∏–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º</p>
    </div>
    
    <div class="search-container">
        <div class="search-card">
            <div class="search-group">
                <div class="search-input-group">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="search-query" 
                           placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞..." class="search-input">
                </div>
                
                <div class="search-input-group">
                    <i class="fas fa-carrot search-icon"></i>
                    <input type="text" id="search-ingredients" 
                           placeholder="–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)..." class="search-input">
                </div>
                
                <button type="button" class="search-btn" onclick="performSearch()">
                    <i class="fas fa-search"></i> –ù–∞–π—Ç–∏
                </button>
            </div>
            
            <div class="search-options">
                <h4><i class="fas fa-filter"></i> –†–µ–∂–∏–º –ø–æ–∏—Å–∫–∞ –ø–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞–º:</h4>
                <div class="search-mode">
                    <label class="mode-label">
                        <input type="radio" name="mode" value="any" checked>
                        <span class="mode-btn">
                            <i class="fas fa-check-circle"></i>
                            –•–æ—Ç—è –±—ã –æ–¥–∏–Ω –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç
                        </span>
                    </label>
                    <label class="mode-label">
                        <input type="radio" name="mode" value="all">
                        <span class="mode-btn">
                            <i class="fas fa-list-check"></i>
                            –í—Å–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã
                        </span>
                    </label>
                </div>
                
                <div class="search-filters">
                    <div class="filter-group">
                        <label><i class="fas fa-clock"></i> –í—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è:</label>
                        <select id="time-filter" class="filter-select">
                            <option value="">–õ—é–±–æ–µ –≤—Ä–µ–º—è</option>
                            <option value="15">–î–æ 15 –º–∏–Ω—É—Ç</option>
                            <option value="30">–î–æ 30 –º–∏–Ω—É—Ç</option>
                            <option value="60">–î–æ 1 —á–∞—Å–∞</option>
                            <option value="120">–î–æ 2 —á–∞—Å–æ–≤</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label><i class="fas fa-fire"></i> –°–ª–æ–∂–Ω–æ—Å—Ç—å:</label>
                        <select id="difficulty-filter" class="filter-select">
                            <option value="">–õ—é–±–∞—è</option>
                            <option value="–õ–µ–≥–∫–∏–π">–õ–µ–≥–∫–∏–π</option>
                            <option value="–°—Ä–µ–¥–Ω–∏–π">–°—Ä–µ–¥–Ω–∏–π</option>
                            <option value="–°–ª–æ–∂–Ω—ã–π">–°–ª–æ–∂–Ω—ã–π</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label><i class="fas fa-tag"></i> –ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                        <select id="category-filter" class="filter-select">
                            <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                            <option value="–ó–∞–≤—Ç—Ä–∞–∫">–ó–∞–≤—Ç—Ä–∞–∫</option>
                            <option value="–û–±–µ–¥">–û–±–µ–¥</option>
                            <option value="–£–∂–∏–Ω">–£–∂–∏–Ω</option>
                            <option value="–î–µ—Å–µ—Ä—Ç">–î–µ—Å–µ—Ä—Ç</option>
                            <option value="–í—ã–ø–µ—á–∫–∞">–í—ã–ø–µ—á–∫–∞</option>
                            <option value="–ù–∞–ø–∏—Ç–∫–∏">–ù–∞–ø–∏—Ç–∫–∏</option>
                            <option value="–î–∏–µ—Ç–∏—á–µ—Å–∫–æ–µ">–î–∏–µ—Ç–∏—á–µ—Å–∫–æ–µ</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="recent-searches">
            <h4><i class="fas fa-history"></i> –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–æ–∏—Å–∫–∏:</h4>
            <div class="search-tags">
                <button class="search-tag" onclick="quickSearch('–ø–∏—Ä–æ–≥')">–ø–∏—Ä–æ–≥</button>
                <button class="search-tag" onclick="quickSearch('–∫—É—Ä–∏—Ü–∞')">–∫—É—Ä–∏—Ü–∞</button>
                <button class="search-tag" onclick="quickSearch('—Å–∞–ª–∞—Ç')">—Å–∞–ª–∞—Ç</button>
                <button class="search-tag" onclick="quickSearch('—Å—É–ø')">—Å—É–ø</button>
                <button class="search-tag" onclick="quickSearchByIngredients('—è–π—Ü–∞,–º—É–∫–∞')">–≤—ã–ø–µ—á–∫–∞</button>
                <button class="search-tag" onclick="quickSearchByIngredients('–ø–æ–º–∏–¥–æ—Ä—ã,–æ–≥—É—Ä—Ü—ã')">–æ–≤–æ—â–∏</button>
                <button class="search-tag" onclick="setFilter('category', '–ó–∞–≤—Ç—Ä–∞–∫')">–∑–∞–≤—Ç—Ä–∞–∫–∏</button>
                <button class="search-tag" onclick="setFilter('category', '–î–µ—Å–µ—Ä—Ç')">–¥–µ—Å–µ—Ä—Ç—ã</button>
            </div>
        </div>
    </div>
    
    <div class="search-results">
        <div class="results-header">
            <h3 id="results-title"><i class="fas fa-utensils"></i> –í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã</h3>
            <div class="results-info">
                <span id="results-count">0 —Ä–µ—Ü–µ–ø—Ç–æ–≤</span>
            </div>
        </div>
        
        <div id="search-results-container" class="recipes-grid">
            <!-- –†–µ—Ü–µ–ø—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
        </div>
    </div>
</div>

<script>
// –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    loadAllRecipes();
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
    document.getElementById('search-query').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') performSearch();
    });
    
    document.getElementById('search-ingredients').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') performSearch();
    });
    
    document.querySelectorAll('.filter-select').forEach(select => {
        select.addEventListener('change', performSearch);
    });
    
    document.querySelectorAll('input[name="mode"]').forEach(radio => {
        radio.addEventListener('change', performSearch);
    });
});

// –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫
function quickSearch(query) {
    document.getElementById('search-query').value = query;
    document.getElementById('search-ingredients').value = '';
    performSearch();
}

function quickSearchByIngredients(ingredients) {
    document.getElementById('search-query').value = '';
    document.getElementById('search-ingredients').value = ingredients;
    performSearch();
}

function setFilter(filterName, value) {
    document.getElementById(`${filterName}-filter`).value = value;
    performSearch();
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤
async function loadAllRecipes() {
    showLoading();
    try {
        const response = await fetch('/api/recipes');
        const data = await response.json();
        displayResults(data.recipes || []);
    } catch (error) {
        console.error('Error loading recipes:', error);
        showError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤');
    }
}

// –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞
async function performSearch() {
    const query = document.getElementById('search-query').value;
    const ingredients = document.getElementById('search-ingredients').value;
    const time = document.getElementById('time-filter').value;
    const difficulty = document.getElementById('difficulty-filter').value;
    const category = document.getElementById('category-filter').value;
    const mode = document.querySelector('input[name="mode"]:checked').value;
    
    // –°–æ–±–∏—Ä–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    const params = new URLSearchParams();
    if (query) params.append('q', query);
    if (ingredients) params.append('ingredients', ingredients);
    if (time) params.append('time', time);
    if (difficulty) params.append('difficulty', difficulty);
    if (category) params.append('category', category);
    params.append('mode', mode);
    
    showLoading();
    
    try {
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º /api/search (–æ—Å–Ω–æ–≤–Ω–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç)
        const response = await fetch(`/api/search?${params}`);
        const data = await response.json();
        displayResults(data.recipes || []);
    } catch (error) {
        console.error('Search error:', error);
        showError('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤');
    }
}

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
function displayResults(recipes) {
    const container = document.getElementById('search-results-container');
    const titleElement = document.getElementById('results-title');
    const countElement = document.getElementById('results-count');
    
    countElement.textContent = `${recipes.length} —Ä–µ—Ü–µ–ø—Ç–æ–≤`;
    
    if (recipes.length === 0) {
        titleElement.innerHTML = '<i class="fas fa-search"></i> –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ';
        container.innerHTML = `
            <div class="no-results">
                <i class="fas fa-search"></i>
                <h3>–ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ–∏—Å–∫–∞</p>
            </div>
        `;
        return;
    }
    
    titleElement.innerHTML = `<i class="fas fa-utensils"></i> –ù–∞–π–¥–µ–Ω–æ ${recipes.length} —Ä–µ—Ü–µ–ø—Ç–æ–≤`;
    
    // –†–µ–Ω–¥–µ—Ä–∏–º —Ä–µ—Ü–µ–ø—Ç—ã
    container.innerHTML = recipes.map(recipe => `
        <div class="recipe-card">
            <img src="${recipe.image_url || '/static/img/default.jpg'}" 
                 alt="${recipe.title}" 
                 class="recipe-image"
                 onerror="this.src='/static/img/default.jpg'">
            
            <div class="recipe-content">
                <h3 class="recipe-title">${recipe.title}</h3>
                
                <div class="recipe-meta">
                    <span><i class="fas fa-clock"></i> ${recipe.cooking_time || 0} –º–∏–Ω</span>
                    <span><i class="fas fa-fire"></i> ${recipe.difficulty || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</span>
                    <span><i class="fas fa-tag"></i> ${recipe.category || '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏'}</span>
                </div>
                
                ${recipe.description ? `
                    <p class="recipe-description">
                        ${recipe.description.length > 100 ? 
                            recipe.description.substring(0, 100) + '...' : 
                            recipe.description}
                    </p>
                ` : ''}
                
                <div class="recipe-actions">
                    <button class="btn-view" onclick="viewRecipe(${recipe.id})">
                        <i class="fas fa-eye"></i> –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                    </button>
                </div>
            </div>
        </div>
    `).join('');
}

// –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
function showLoading() {
    const container = document.getElementById('search-results-container');
    container.innerHTML = `
        <div class="loading">
            <i class="fas fa-spinner fa-spin"></i>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤...</p>
        </div>
    `;
}

// –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
function showError(message) {
    const container = document.getElementById('search-results-container');
    container.innerHTML = `
        <div class="error">
            <i class="fas fa-exclamation-triangle"></i>
            <h3>${message}</h3>
        </div>
    `;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ—Ü–µ–ø—Ç–∞
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ—Ü–µ–ø—Ç–∞ (—Ç–∞–∫–∞—è –∂–µ –∫–∞–∫ –≤ index.html)
async function viewRecipe(id) {
    try {
        const response = await fetch(`/api/recipes/${id}`);
        if (!response.ok) {
            throw new Error(`–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: ${response.status}`);
        }
        
        const result = await response.json();
        const recipe = result.recipe;
        
        if (!recipe) {
            throw new Error('–†–µ—Ü–µ–ø—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –æ—Ç–≤–µ—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞');
        }
        
        // === –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê –ò–ù–ì–†–ï–î–ò–ï–ù–¢–û–í –ò –®–ê–ì–û–í ===
        function parseIngredientsOrSteps(data) {
            if (!data) return [];
            
            // –ï—Å–ª–∏ —ç—Ç–æ —É–∂–µ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∏–≤ (–ª–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è)
            if (Array.isArray(data)) {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –º–∞—Å—Å–∏–≤–æ–º —Å –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π
                if (data.length === 1 && typeof data[0] === 'string') {
                    const firstItem = data[0];
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ—Ö–æ–∂–µ –ª–∏ —ç—Ç–æ –Ω–∞ —Å—Ç—Ä–æ–∫—É "['item1', 'item2']"
                    if (firstItem.startsWith('[') && firstItem.endsWith(']')) {
                        return parseStringArray(firstItem);
                    }
                }
                return data; // –ü—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∏–≤
            }
            
            // –ï—Å–ª–∏ —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞ (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
            if (typeof data === 'string') {
                return parseStringArray(data);
            }
            
            return [];
        }
        
        function parseStringArray(str) {
            str = str.trim();
            
            // –£–±–∏—Ä–∞–µ–º –≤–Ω–µ—à–Ω–∏–µ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —Å–∫–æ–±–∫–∏
            if (str.startsWith('[') && str.endsWith(']')) {
                str = str.slice(1, -1).trim();
            }
            
            if (!str) return [];
            
            try {
                // –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–æ–±—Ä–∞—Ç—å –∫–∞–∫ JSON (–º–µ–Ω—è–µ–º –æ–¥–∏–Ω–∞—Ä–Ω—ã–µ –Ω–∞ –¥–≤–æ–π–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏)
                const jsonStr = str.replace(/'/g, '"');
                return JSON.parse(`[${jsonStr}]`);
            } catch (e) {
                // –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, —Ä–∞–∑–¥–µ–ª—è–µ–º –≤—Ä—É—á–Ω—É—é
                const items = str.split(/\s*,\s*/)
                    .map(item => {
                        // –£–±–∏—Ä–∞–µ–º –∫–∞–≤—ã—á–∫–∏ —Å –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞
                        item = item.trim();
                        if ((item.startsWith("'") && item.endsWith("'")) || 
                            (item.startsWith('"') && item.endsWith('"'))) {
                            item = item.slice(1, -1);
                        }
                        return item;
                    })
                    .filter(item => item.length > 0);
                
                return items;
            }
        }
        
        // –ü–æ–ª—É—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        const ingredientsList = parseIngredientsOrSteps(recipe.ingredients);
        const stepsList = parseIngredientsOrSteps(recipe.steps);
        
        // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–ª—è –≤—ã–≤–æ–¥–∞
        const ingredients = ingredientsList.length > 0 
            ? ingredientsList.join('\n‚Ä¢ ') 
            : '–ù–µ —É–∫–∞–∑–∞–Ω—ã';
            
        const steps = stepsList.length > 0 
            ? stepsList.join('\n\n') 
            : '–ù–µ —É–∫–∞–∑–∞–Ω—ã';
        
        // –°–æ–∑–¥–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        const message = 
            `üçΩÔ∏è ${recipe.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}\n\n` +
            `‚è∞ –í—Ä–µ–º—è: ${recipe.cooking_time || 0} –º–∏–Ω—É—Ç\n` +
            `üî• –°–ª–æ–∂–Ω–æ—Å—Ç—å: ${recipe.difficulty || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}\n` +
            `üè∑Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${recipe.category || '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏'}\n\n` +
            `üìù –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:\n‚Ä¢ ${ingredients}\n\n` +
            `üë©‚Äçüç≥ –®–∞–≥–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è:\n${steps}`;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        alert(message);
        
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Ü–µ–ø—Ç–∞:', error);
        alert(`–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç.\n\n–û—à–∏–±–∫–∞: ${error.message}`);
    }
}
</script>

<style>
/* –í—Å–µ —Å—Ç–∏–ª–∏ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
.search-page { margin: 40px 0; }
.search-header { text-align: center; margin-bottom: 40px; }
.search-header h2 { font-size: 2.5rem; margin-bottom: 15px; color: var(--dark); }
.search-header p { font-size: 1.1rem; color: var(--text); opacity: 0.8; }
.search-card { background: white; padding: 40px; border-radius: var(--radius); box-shadow: var(--shadow); margin-bottom: 30px; border: 2px solid var(--secondary); }
.search-group { display: flex; gap: 20px; margin-bottom: 30px; flex-wrap: wrap; }
@media (max-width: 768px) { .search-group { flex-direction: column; } }
.search-input-group { flex: 1; position: relative; }
.search-icon { position: absolute; left: 20px; top: 50%; transform: translateY(-50%); color: var(--primary); font-size: 1.2rem; }
.search-input { width: 100%; padding: 15px 15px 15px 50px; border: 2px solid var(--secondary); border-radius: 50px; font-size: 1rem; transition: var(--transition); }
.search-input:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(255, 133, 162, 0.2); outline: none; }
.search-options { padding-top: 30px; border-top: 2px dashed #eee; }
.search-mode { display: flex; gap: 20px; margin: 20px 0; flex-wrap: wrap; }
.mode-label { flex: 1; min-width: 250px; }
.mode-label input[type="radio"] { display: none; }
.mode-btn { display: flex; align-items: center; justify-content: center; gap: 15px; padding: 20px; border: 2px solid var(--secondary); background: white; border-radius: 15px; cursor: pointer; transition: var(--transition); font-weight: 600; }
.mode-label input[type="radio"]:checked + .mode-btn { background: var(--secondary); color: white; border-color: var(--secondary); transform: translateY(-5px); box-shadow: 0 10px 20px rgba(163, 217, 177, 0.3); }
.mode-btn:hover { background: var(--light); transform: translateY(-2px); }
.search-filters { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px; padding: 30px; background: var(--light); border-radius: 15px; }
.filter-group { display: flex; flex-direction: column; gap: 10px; }
.filter-select { padding: 12px; border: 2px solid var(--secondary); border-radius: 10px; font-size: 1rem; background: white; cursor: pointer; transition: var(--transition); }
.filter-select:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 0 3px rgba(255, 133, 162, 0.2); }
.recent-searches { background: white; padding: 25px; border-radius: var(--radius); box-shadow: var(--shadow); margin-bottom: 40px; }
.search-tags { display: flex; flex-wrap: wrap; gap: 15px; margin-top: 20px; }
.search-tag { padding: 10px 20px; background: var(--light); border: 2px solid var(--secondary); border-radius: 50px; cursor: pointer; transition: var(--transition); font-weight: 600; }
.search-tag:hover { background: var(--secondary); color: white; transform: translateY(-2px); }
.search-results { margin-top: 60px; }
.results-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #eee; }
.results-info { display: flex; flex-direction: column; align-items: flex-end; gap: 5px; font-size: 0.9rem; color: var(--text); }
.recipes-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 30px; margin-top: 30px; }
.recipe-card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1); transition: all 0.3s ease; border: 2px solid transparent; }
.recipe-card:hover { transform: translateY(-10px); border-color: #ff85a2; box-shadow: 0 15px 30px rgba(255, 133, 162, 0.2); }
.recipe-image { width: 100%; height: 200px; object-fit: cover; border-bottom: 3px solid #ffd166; }
.recipe-content { padding: 20px; }
.recipe-title { font-size: 1.4rem; margin-bottom: 15px; color: #333; }
.recipe-meta { display: flex; gap: 15px; margin-bottom: 15px; flex-wrap: wrap; }
.recipe-meta span { display: flex; align-items: center; gap: 8px; font-size: 0.9rem; color: #666; }
.recipe-description { color: #666; line-height: 1.5; margin: 15px 0; font-size: 0.95rem; }
.recipe-actions { display: flex; gap: 15px; margin-top: 20px; }
.btn-view { flex: 1; padding: 12px; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; transition: var(--transition); display: flex; align-items: center; justify-content: center; gap: 10px; background: var(--primary); color: white; }
.btn-view:hover { background: #ff6b95; transform: translateY(-2px); }
.search-btn { background: var(--primary); color: white; border: none; border-radius: 50px; padding: 15px 30px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: var(--transition); display: flex; align-items: center; gap: 10px; white-space: nowrap; }
.search-btn:hover { background: #ff6b95; transform: translateY(-2px); box-shadow: 0 10px 20px rgba(255, 107, 149, 0.3); }
.loading, .no-results, .error { grid-column: 1 / -1; text-align: center; padding: 60px; }
.loading i { font-size: 3rem; color: var(--primary); margin-bottom: 20px; }
.no-results i { font-size: 3rem; color: var(--primary); margin-bottom: 20px; }
.error i { font-size: 3rem; color: #ff6b6b; margin-bottom: 20px; }
/* –°–µ—Ç–∫–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É */
.recipes-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 15px;
    margin-top: 30px;
    /* –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–∏ 4 —Å—Ç—Ä–æ–∫–∏: */
    max-width: 100vw;
    width: 100vw;
    margin-left: calc(-50vw + 50%);
    margin-right: calc(-50vw + 50%);
    padding: 0 20px;
}

/* –£–±–µ—Ä–∏—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
.search-results {
    overflow: visible;
    max-width: none;
}

/* –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º, —á—Ç–æ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ä–∞—Å—Ç—è–≥–∏–≤–∞—é—Ç—Å—è */
.recipe-card {
    min-width: 0;
    width: 100%;
}
</style>
{% endblock %}
